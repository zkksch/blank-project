[tox]
envlist =
    py37
    coverage


[testenv]
usedevelop = True
deps =
    coverage
    -r {toxinidir}/requirements/base.txt
commands =
    coverage run --rcfile={toxinidir}/.coveragerc -p -m unittest discover -s {toxinidir}/src


[testenv:coverage]
basepython = python3.7
usedevelop = True
deps =
    coverage
    -r {toxinidir}/requirements/base.txt
commands =
    coverage combine
    coverage report --fail-under=0
commands_post =
    coverage erase
