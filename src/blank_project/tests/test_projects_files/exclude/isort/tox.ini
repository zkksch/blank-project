[tox]
envlist =
    py37
    coverage
    mypy
    pylint
    flake8


[testenv]
usedevelop = True
deps =
    coverage
    -r {toxinidir}/requirements/base.txt
commands =
    coverage run --rcfile={toxinidir}/.coveragerc -p -m unittest discover -s {toxinidir}/src


[testenv:coverage]
usedevelop = True
deps =
    coverage
    -r {toxinidir}/requirements/base.txt
commands =
    coverage combine
    coverage report --fail-under=0
commands_post =
    coverage erase


[testenv:mypy]
deps =
    mypy
    -r {toxinidir}/requirements/base.txt
commands =
    python -m mypy --config-file {toxinidir}/mypy.ini {toxinidir}/src


[testenv:pylint]
deps =
    pylint
    -r {toxinidir}/requirements/base.txt
commands =
    python -m pylint --rcfile {toxinidir}/.pylintrc {toxinidir}/src


[testenv:flake8]
deps =
    flake8
    -r {toxinidir}/requirements/base.txt
commands =
    python -m flake8 --config {toxinidir}/.flake8 {toxinidir}/src
